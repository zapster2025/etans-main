<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Egg Size Summary Table</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<link rel="stylesheet" href="style.css">
</head>
<body>


<!-- Control bar ABOVE the table -->
<div class="controls">
  <button onclick="showAllRows()">Show Hidden Buildings</button>
  <button onclick="resetData()">Reset Data</button>
  <h1>ETANS EGG COMBINATION ðŸ¥š</h1>
  <img src="logo.jpg" alt="ETANS Logo" height="20" width="50">
</div>

<div class="table-container">
<table id="eggTable">
  <thead>
    <tr>
      <th rowspan="2" class="sticky-col">BUILDINGS</th>	
      <th colspan="3">NNV</th>
      <th colspan="3">NV</th>
      <th colspan="3">NW</th>
      <th colspan="3">PT</th>
      <th colspan="3">PW</th>
      <th colspan="3">S</th>
      <th colspan="3">M</th>
      <th colspan="3">L</th>
      <th colspan="3">XL</th>
      <th colspan="3">J</th>
      <th colspan="3">SJ</th>
      <th colspan="3">BR</th>
      <th colspan="3">BO</th>
    </tr>
    <tr>
      <th>Cs</th><th>Tr</th><th>Pcs</th>
      <th>Cs</th><th>Tr</th><th>Pcs</th>
      <th>Cs</th><th>Tr</th><th>Pcs</th>
      <th>Cs</th><th>Tr</th><th>Pcs</th>
      <th>Cs</th><th>Tr</th><th>Pcs</th>
      <th>Cs</th><th>Tr</th><th>Pcs</th>
      <th>Cs</th><th>Tr</th><th>Pcs</th>
      <th>Cs</th><th>Tr</th><th>Pcs</th>
      <th>Cs</th><th>Tr</th><th>Pcs</th>
      <th>Cs</th><th>Tr</th><th>Pcs</th>
      <th>Cs</th><th>Tr</th><th>Pcs</th>
      <th>Cs</th><th>Tr</th><th>Pcs</th>
      <th>Cs</th><th>Tr</th><th>Pcs</th>
    </tr>
  </thead>

  <tbody id="tableBody">
    <!-- Rows will be generated by JavaScript -->
  </tbody>
</table>
</div>

<!-- Navigation buttons -->
<div class="nav-buttons">
  <button onclick="window.location.href='https://etans-eggroom.netlify.app/index.html'">HOME</button>
  <button onclick="window.location.href='https://etans-eggroom.netlify.app/egg/index.html'">EGG SUMMARY</button>
</div>

<script>
const buildings = ["A","B","C","D","E","F","G","H"];
const tableBody = document.getElementById("tableBody");

// Generate rows and attach hide button events
buildings.forEach(b => {
  const tr = document.createElement("tr");
  tr.id = `row-${b}`;
  tr.innerHTML = `<td class="sticky-col"><b>${b}</b> 
                    <button class="hide-btn">Hide</button></td>` +
    Array(13 * 3).fill('<td><input type="number" min="0" value=""></td>').join("");
  tableBody.appendChild(tr);

  // Add event listener to hide button
  tr.querySelector("button.hide-btn").addEventListener("click", () => toggleRow(b));
});

// SUM TOTAL
let sumRow = document.createElement("tr");
sumRow.id = "sumRow";
sumRow.innerHTML = `<td class="sticky-col"><b>SUM TOTAL</b></td>` + 
  Array(13 * 3).fill('<td class="sumCell">0</td>').join("");
tableBody.appendChild(sumRow);

// SIMPLIFIED TOTAL
let simpRow = document.createElement("tr");
simpRow.id = "simplifiedRow";
simpRow.innerHTML = `<td class="sticky-col"><b>SIMPLIFIED TOTAL</b></td>` + 
  Array(13 * 3).fill('<td class="simpCell">0</td>').join("");
tableBody.appendChild(simpRow);

// CSS class for hidden rows
const style = document.createElement('style');
style.innerHTML = `.hidden { display: none; }`;
document.head.appendChild(style);

// Toggle row visibility
function toggleRow(id) {
  const row = document.getElementById(`row-${id}`);
  row.classList.toggle("hidden");

  // Save hidden rows
  const hiddenRows = [];
  buildings.forEach(b => {
    if (document.getElementById(`row-${b}`).classList.contains("hidden")) {
      hiddenRows.push(b);
    }
  });
  localStorage.setItem("hiddenRows", JSON.stringify(hiddenRows));
}

// Show all rows
function showAllRows() {
  buildings.forEach(b => document.getElementById(`row-${b}`).classList.remove("hidden"));
  localStorage.setItem("hiddenRows", JSON.stringify([]));
}

// Reset inputs
function resetData() {
  document.querySelectorAll("#eggTable input").forEach(i => i.value = "");
  localStorage.removeItem("tableData");
}

// Save inputs
function saveTableData() {
  const data = {};
  document.querySelectorAll("#eggTable input").forEach((input, index) => {
    data[index] = input.value;
  });
  localStorage.setItem("tableData", JSON.stringify(data));
}

// Load inputs
function loadTableData() {
  const savedData = JSON.parse(localStorage.getItem("tableData")) || {};
  document.querySelectorAll("#eggTable input").forEach((input, index) => {
    if (savedData.hasOwnProperty(index)) {
      input.value = savedData[index];
    }
  });
}

// Load hidden rows
function loadHiddenRows() {
  const hiddenRows = JSON.parse(localStorage.getItem("hiddenRows")) || [];
  hiddenRows.forEach(b => {
    const row = document.getElementById(`row-${b}`);
    if (row) row.classList.add("hidden");
  });
}

// Auto-save on input
document.addEventListener("input", e => {
  if (e.target.tagName === "INPUT") saveTableData();
});

// Load on page start
window.addEventListener("DOMContentLoaded", () => {
  loadTableData();
  loadHiddenRows();
});
</script>




<script src="script.js"></script>
</body>
</html>
